---
import { actions } from 'astro:actions';
import Footer from '../../components/Footer.astro';
import FooterRights from '../../components/FooterRights.astro';
import { langs, type ui } from '../../i18n/ui';
import { getLangFromUrl, useTranslations } from '../../i18n/utils'
import Layout from '../../layouts/Layout.astro' 
import { resend } from '../../lib/resend';
console.log('ranujem', getLangFromUrl(Astro.url))

export const prerender = false;
export function getStaticPaths () {
	return langs.map((lang) => ({
		params: { lang },
	}))
};

const something = Astro.getActionResult(actions.sendEmail);
console.log('something', something);

const {lang}  = Astro.params;
const t = useTranslations(lang as keyof typeof ui);
---

<Layout lang={lang} pageTitle={t('meta.title_contact_page')}
	pageDescription={t('meta.page_description_contact')}>
    <main class="mx-auto border border-black/50 my-20 rounded-md bg-bg-acika-primary px-4 sm:px-6 lg:px-8 py-20">
      <div class="mb-12">
        <h2 class="text-4xl font-serif font-bold text-foreground mb-4 text-balance">
          Get in Touch
        </h2>
        <p class="text-lg text-muted-foreground">
          Have questions or want to book an appointment? We'd love to hear from you. Send us a message and we'll respond as soon as possible.
        </p>
      </div>

      <!-- Contact Form -->
      <div class="bg-bg-acika-secondary rounded-lg border border-border p-8 shadow-sm">

        <form action={actions.sendEmail} method="POST" id="contactForm" class="space-y-6">
          <!-- Email Input -->
          <div class="space-y-2">
            <label for="email" class="block text-sm font-medium text-foreground">
              Email Address
            </label>
            <input
              id="email"
              name="email"
              type="email"
              required
              placeholder="your.email@example.com"
              class="w-full px-4 py-2 border border-input rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"
            />
          </div>

          <!-- Subject Input -->
          <div class="space-y-2">
            <label for="subject" class="block text-sm font-medium text-foreground">
              Subject
            </label>
            <input
              id="subject"
              name="subject"
              type="text"
              required
              placeholder="What is this regarding?"
              class="w-full px-4 py-2 border border-input rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring"
            />
          </div>

          <!-- Message Body -->
          <div class="space-y-2">
            <label for="body" class="block text-sm font-medium text-foreground">
              Message
            </label>
            <textarea
              id="body"
              name="message"
              required
              placeholder="Tell us more about your inquiry..."
              rows="6"
              class="w-full px-4 py-2 border border-input rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring resize-none"
            ></textarea>
          </div>

          <!-- Submit Button -->
          <div class="pt-4">
            <button
              type="submit"
              class="w-full bg-primary hover:bg-primary/90 text-primary-foreground py-3 rounded-lg font-medium transition"
            >
              Send Message
            </button>
          </div>
        </form>
      </div>
	  </main>
	<Footer/>
	<FooterRights/>
</Layout>